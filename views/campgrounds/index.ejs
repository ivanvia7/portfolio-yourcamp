<% layout('layouts/boilerplate')%>

<div class="container-left padding-0">
  <div class="content-wrapper">
    <h2 class="section-header p-6">All Campgrounds</h2>

    <div class="cards-scroll">
      <% for (let campground of campgrounds){%>
      <div class="card mb-3 shadow-sm border-0"">
        <div class="row">
          <div class="col-md-4">
            <%if(campground.images.length) {%>
            <img class="img-card" alt="" src="<%=campground.images[0].url%>" />
            <% }else {%>
            <img
              class="img-card"
              alt=""
              src="https://res.cloudinary.com/douqbebwk/image/upload/v1600103881/YelpCamp/lz8jjv2gyynjil7lswf4.png"
            />
            <% } %>
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title"><%= campground.title %></h5>

              <p class="card-text card-text-short mb-1"><%= campground.description %></p>
              <p class="card-text">
                <small class="text-muted"><%= campground.location%></small>
              </p>
              <a
                class="btn"
                id="accent-button-card"
                href="/campgrounds/<%=campground._id%>"
                >View <%=campground.title%></a
              >
            </div>
          </div>
        </div>
      </div>
      <% }%>
    </div>
  </div>
</div>
<div class="container-right">
  <div class="image-handler">
    <div id="cluster-map"></div>
  </div>
</div>
<script>
  const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
  const campgrounds = { features: <%- JSON.stringify(campgrounds) %>}
</script>

<script src="/javascripts/clusterMap.js"></script>
